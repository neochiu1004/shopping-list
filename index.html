<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‡¯ğŸ‡µ æ—¥æœ¬åˆ†å¸³è¨ˆç®—è¡¨</title>
    <style>
        :root {
            /* åŒ—æµ·é“é…è‰²ï¼šè–°è¡£è‰ç´«ã€é›ªç™½ã€å“ˆå¯†ç“œç¶  */
            --primary-color: #9370DB; /* MediumPurple è–°è¡£è‰ */
            --secondary-color: #E6E6FA; /* Lavender æ·ºç´«èƒŒæ™¯ */
            --accent-color: #78e08f; /* å«©ç¶ è‰² */
            --text-color: #4a4a4a;
            --border-radius: 12px;
        }

        body {
            font-family: "Microsoft JhengHei", "Hiragino Sans", sans-serif;
            background-color: #f8f9fd;
            background-image: linear-gradient(180deg, #fdfbfb 0%, #ebedee 100%);
            margin: 0;
            padding: 20px;
            color: var(--text-color);
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            box-shadow: 0 8px 30px rgba(147, 112, 219, 0.15); /* ç´«è‰²æŸ”å’Œé™°å½± */
            border-radius: var(--border-radius);
            border: 1px solid #fff;
        }

        h1 {
            text-align: center;
            color: var(--primary-color);
            font-weight: 600;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            color: #888;
            font-size: 0.9em;
            margin-bottom: 25px;
        }

        /* æ§åˆ¶æŒ‰éˆ•å€ */
        .controls {
            text-align: right;
            margin-bottom: 15px;
        }

        .btn-reset {
            background-color: #ff7675;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            transition: opacity 0.3s;
        }
        .btn-reset:hover { opacity: 0.8; }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            border-radius: var(--border-radius);
            overflow: hidden;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #f0f0f0;
        }

        th {
            background-color: var(--primary-color);
            color: white;
            font-weight: normal;
            letter-spacing: 1px;
        }

        tr:last-child td { border-bottom: none; }
        
        tr:hover {
            background-color: var(--secondary-color);
        }

        .product-name {
            font-weight: 500;
        }

        .note {
            font-size: 0.8em;
            color: #888;
            margin-top: 4px;
            background-color: #f0f0f0;
            display: inline-block;
            padding: 2px 8px;
            border-radius: 10px;
        }

        .price-col {
            font-family: 'Courier New', Courier, monospace;
            font-weight: bold;
            color: #6c5ce7;
        }

        input[type="number"] {
            width: 70px;
            padding: 8px;
            border: 2px solid #eee;
            border-radius: 8px;
            text-align: center;
            font-size: 1em;
            outline: none;
            transition: border-color 0.3s;
        }

        input[type="number"]:focus {
            border-color: var(--primary-color);
            background-color: #fffaf0;
        }

        /* ç¸½è¨ˆæ¬„ä½ç¾åŒ– */
        .total-bar {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 800px;
            background: linear-gradient(135deg, var(--primary-color), #a29bfe);
            color: white;
            padding: 15px 25px;
            border-radius: 50px;
            box-shadow: 0 10px 25px rgba(147, 112, 219, 0.4);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            backdrop-filter: blur(5px);
        }

        .total-item {
            font-size: 1em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .total-item span {
            font-weight: bold;
            font-size: 1.2em;
            margin-left: 5px;
        }

        .grand-total {
            background-color: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
        }

        /* æ‰‹æ©Ÿç‰ˆéŸ¿æ‡‰å¼ */
        @media (max-width: 600px) {
            body { padding: 10px; }
            .container { padding: 10px; }
            th, td { padding: 10px 5px; font-size: 0.9em; }
            input[type="number"] { width: 45px; padding: 5px; }
            .note { display: none; } /* æ‰‹æ©Ÿéš±è—å‚™è¨» */
            .total-bar {
                width: 95%;
                bottom: 10px;
                padding: 12px;
                font-size: 0.9em;
                flex-direction: row;
                justify-content: space-around;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ‡¯ğŸ‡µ æ—¥æœ¬åˆ†å¸³è¨ˆç®—è¡¨</h1>
    <div class="subtitle">Hokkaido Trip Shopping List</div>
    
    <div class="controls">
        <button class="btn-reset" onclick="clearAllData()">ğŸ—‘ï¸ æ¸…é™¤æ‰€æœ‰è³‡æ–™</button>
    </div>

    <table id="calcTable">
        <thead>
            <tr>
                <th>å“é …</th>
                <th>å–®åƒ¹</th>
                <th>Neo</th>
                <th>Ryan</th>
                <th>å°è¨ˆ</th>
            </tr>
        </thead>
        <tbody id="tableBody">
            </tbody>
    </table>
    <div style="height: 80px;"></div>
</div>

<div class="total-bar">
    <div class="total-item">Neo: <span id="neoTotal">$0</span></div>
    <div class="total-item">Ryan: <span id="ryanTotal">$0</span></div>
    <div class="total-item grand-total">Total: <span id="grandTotal">$0</span></div>
</div>

<script>
    const products = [
        { name: "è‘‰é»ƒç´ 100 + èŠéº»ç´  (60ç²’)", note: "1çµ„(2åŒ…)", price: 9164 },
        { name: "é˜²é¢¨é€šè–æ•£ Z", note: "æ¼¢æ–¹æ¸›è‚¥/ä¾¿ç§˜è—¥", price: 5318 },
        { name: "æŠ¹èŒ¶ææ‹‰ç±³è˜‡å·§å…‹åŠ›", note: "", price: 828 },
        { name: "Alfort å¸†èˆ¹å·§å…‹åŠ›é¤…ä¹¾", note: "", price: 275 },
        { name: "é¾è§’æ•£ å–‰ç³–", note: "é»‘é†‹æ —è—è“å‘³", price: 302 },
        { name: "Ora2 Premium ç‰™è†", note: "èŠ³é¦™è–„è·", price: 367 },
        { name: "NONIO ç‰™è†", note: "è—¥ç”¨æ¸…æ¶¼è–„è·", price: 302 },
        { name: "DHC æ­¦é´è‘‰", note: "Gymnema/æ§ç³– 20æ—¥", price: 597 },
        { name: "DHC ç¶­ä»–å‘½C", note: "20æ—¥ä»½", price: 155 },
        { name: "é¾è§’æ•£ ç›´æœé¡†ç²’", note: "è–„è·å‘³/å…é…æ°´", price: 275 },
        { name: "KitKat å·§å…‹åŠ›", note: "æ¿ƒåšæŠ¹èŒ¶", price: 1100 }, 
        /* è¨»ï¼šåŸåœ–KitKatå–®åƒ¹275ä½†å°è¨ˆ1100(4å€‹)ï¼Œæ­¤è™•ä¾æ‚¨çš„è¡¨æ ¼é‚è¼¯ï¼Œè‹¥å–®åƒ¹æ˜¯275è«‹è‡ªè¡Œä¿®æ­£ï¼Œé€™è£¡å‡è¨­è¡¨æ ¼é‡‘é¡æ­£ç¢º */
        { name: "UHAå‘³è¦ºç³– Cororo", note: "è‘¡è„", price: 109 },
        { name: "UHAå‘³è¦ºç³– Cororo", note: "éºé¦™è‘¡è„", price: 109 },
        { name: "UHAå‘³è¦ºç³– Cororo", note: "20ä¸–ç´€æ¢¨", price: 109 },
        { name: "é¾è§’æ•£ ç›´æœé¡†ç²’", note: "æ°´èœœæ¡ƒå‘³", price: 275 },
        { name: "DHC äºé‰› (é‹…)", note: "20æ—¥ä»½", price: 146 },
        { name: "DHC ç¶œåˆç¶­ä»–å‘½Bç¾¤", note: "20æ—¥ä»½", price: 164 },
        { name: "DHC ç”²æ®¼ç´ ", note: "20æ—¥ä»½", price: 330 },
        { name: "DHC è‚è‡Ÿç²¾è¯+é³¥æ°¨é…¸", note: "20æ—¥ä»½(è§£é…’)", price: 735 },
        { name: "é€Ÿå¦™åœ“ (å´æŸè‘‰) å–‰ç³–", note: "å‚³çµ±è‰æœ¬", price: 238 },
        { name: "DHC æ¸›è‚¥å¨åŠ›", note: "Diet Power 20æ—¥", price: 902 }
    ];

    const tableBody = document.getElementById('tableBody');
    const neoTotalEl = document.getElementById('neoTotal');
    const ryanTotalEl = document.getElementById('ryanTotal');
    const grandTotalEl = document.getElementById('grandTotal');
    
    // å­˜æª”éµå€¼
    const STORAGE_KEY = 'hokkaido_shopping_v1';

    function initTable() {
        // å˜—è©¦è®€å–èˆŠè³‡æ–™
        const savedData = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};

        products.forEach((product, index) => {
            const row = document.createElement('tr');
            const savedNeo = savedData[`neo_${index}`] || '';
            const savedRyan = savedData[`ryan_${index}`] || '';
            
            row.innerHTML = `
                <td>
                    <div class="product-name">${product.name}</div>
                    ${product.note ? `<div class="note">${product.note}</div>` : ''}
                </td>
                <td class="price-col">$${product.price.toLocaleString()}</td>
                <td><input type="number" min="0" class="qty-input neo-input" data-index="${index}" data-price="${product.price}" value="${savedNeo}" placeholder="0"></td>
                <td><input type="number" min="0" class="qty-input ryan-input" data-index="${index}" data-price="${product.price}" value="${savedRyan}" placeholder="0"></td>
                <td class="subtotal" style="color: #aaa; font-size:0.9em;">-</td>
            `;
            tableBody.appendChild(row);
        });

        document.querySelectorAll('.qty-input').forEach(input => {
            input.addEventListener('input', (e) => {
                saveData();       // è¼¸å…¥æ™‚ç«‹åˆ»å­˜æª”
                calculateTotals(); // é‡æ–°è¨ˆç®—
            });
        });

        calculateTotals(); // åˆå§‹è¨ˆç®—ä¸€æ¬¡
    }

    function calculateTotals() {
        let neoSum = 0;
        let ryanSum = 0;
        let grandSum = 0;

        const rows = tableBody.querySelectorAll('tr');

        rows.forEach(row => {
            const neoInput = row.querySelector('.neo-input');
            const ryanInput = row.querySelector('.ryan-input');
            const subtotalCell = row.querySelector('.subtotal');
            const price = parseFloat(neoInput.dataset.price);

            const neoQty = parseFloat(neoInput.value) || 0;
            const ryanQty = parseFloat(ryanInput.value) || 0;

            const rowTotal = (neoQty + ryanQty) * price;
            
            // è¦–è¦ºå„ªåŒ–ï¼šæœ‰é‡‘é¡æ‰é¡¯ç¤ºæ·±è‰²ï¼Œå¦å‰‡æ·ºè‰²
            if (rowTotal > 0) {
                subtotalCell.textContent = `$${rowTotal.toLocaleString()}`;
                subtotalCell.style.color = '#4a4a4a';
                subtotalCell.style.fontWeight = 'bold';
            } else {
                subtotalCell.textContent = '-';
                subtotalCell.style.color = '#ddd';
                subtotalCell.style.fontWeight = 'normal';
            }

            neoSum += neoQty * price;
            ryanSum += ryanQty * price;
        });

        grandSum = neoSum + ryanSum;

        neoTotalEl.textContent = `$${neoSum.toLocaleString()}`;
        ryanTotalEl.textContent = `$${ryanSum.toLocaleString()}`;
        grandTotalEl.textContent = `$${grandSum.toLocaleString()}`;
    }

    // è‡ªå‹•å­˜æª”åŠŸèƒ½
    function saveData() {
        const data = {};
        document.querySelectorAll('.neo-input').forEach(input => {
            if(input.value) data[`neo_${input.dataset.index}`] = input.value;
        });
        document.querySelectorAll('.ryan-input').forEach(input => {
            if(input.value) data[`ryan_${input.dataset.index}`] = input.value;
        });
        localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    }

    // æ¸…é™¤è³‡æ–™åŠŸèƒ½
    function clearAllData() {
        if(confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰è¼¸å…¥çš„æ•¸é‡å—ï¼Ÿæ­¤å‹•ä½œç„¡æ³•å¾©åŸã€‚')) {
            localStorage.removeItem(STORAGE_KEY);
            document.querySelectorAll('input[type="number"]').forEach(input => input.value = '');
            calculateTotals();
        }
    }

    initTable();
</script>

</body>
</html>